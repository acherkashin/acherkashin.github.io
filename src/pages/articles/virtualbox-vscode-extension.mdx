---
layout: ../../layouts/post.astro
title: '–ü–∏—à–µ–º Visual Studio Code extension –¥–ª—è VirtualBox'
pubDate: 2020-04-14
author: Cherkashin
excerpt: VS Code –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫—É–¥–∞ —Å –ø–æ–º–æ—â—å—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∫—É—á–∞ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ú–Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±–æ–ª—å–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∏–¥–∞—Ç—å –µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —è —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é –ø—É—Ç–∞—Ç—å—Å—è –≤ –æ–∫–Ω–∞—Ö –∏ –∑–∞–±—ã–≤–∞—é, —á—Ç–æ —è –≤–æ–æ–±—â–µ —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å. –Ø –¥—É–º–∞—é, –∫–∞–∂–¥—ã–π —Ö–æ—Ç—å —Ä–∞–∑ —Ç–µ—Ä—è–ª—Å—è ~~–≤ —Ç—Ä–µ—Ö —Å–æ—Å–Ω–∞—Ö~~ –≤–æ –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏–º –æ–∫–Ω–∞—Ö, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ø–æ–ª–æ–∂—É, —á—Ç–æ –≤–∞–º —ç—Ç–æ –∑–Ω–∞–∫–æ–º–æ. –£ –º–µ–Ω—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω, –∏ –º–µ–Ω—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, —á—Ç–æ –¥–ª—è –∏—Ö –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å VirtualBox –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **Run**. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≥–æ–≤–æ—Ä—è, —Å–µ–≥–æ–¥–Ω—è —è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –∏–∑–±–∞–≤–∏–ª—Å—è –æ—Ç —Å–≤–æ–µ–π –±–æ–ª–∏.
description: VS Code –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫—É–¥–∞ —Å –ø–æ–º–æ—â—å—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∫—É—á–∞ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ú–Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±–æ–ª—å–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∏–¥–∞—Ç—å –µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —è —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é –ø—É—Ç–∞—Ç—å—Å—è –≤ –æ–∫–Ω–∞—Ö –∏ –∑–∞–±—ã–≤–∞—é, —á—Ç–æ —è –≤–æ–æ–±—â–µ —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å. –Ø –¥—É–º–∞—é, –∫–∞–∂–¥—ã–π —Ö–æ—Ç—å —Ä–∞–∑ —Ç–µ—Ä—è–ª—Å—è ~~–≤ —Ç—Ä–µ—Ö —Å–æ—Å–Ω–∞—Ö~~ –≤–æ –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏–º –æ–∫–Ω–∞—Ö, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ø–æ–ª–æ–∂—É, —á—Ç–æ –≤–∞–º —ç—Ç–æ –∑–Ω–∞–∫–æ–º–æ. –£ –º–µ–Ω—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω, –∏ –º–µ–Ω—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, —á—Ç–æ –¥–ª—è –∏—Ö –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å VirtualBox –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **Run**. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≥–æ–≤–æ—Ä—è, —Å–µ–≥–æ–¥–Ω—è —è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –∏–∑–±–∞–≤–∏–ª—Å—è –æ—Ç —Å–≤–æ–µ–π –±–æ–ª–∏.
image:
  src:
  alt:
tags: ['vscode', 'typescript', 'extension']
---

import TitledImage from '../../components/TitledImage.astro';

- [Research](#research)
- [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ —Ç–µ–º–ø–ª–µ–π—Ç–∞](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–±–∞–∑–æ–≤–æ–≥–æ-—Ç–µ–º–ø–ª–µ–π—Ç–∞)
- [–ù–µ–º–Ω–æ–≥–æ –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è](#–Ω–µ–º–Ω–æ–≥–æ-–æ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
- [Contribution points](#contribution-points)
- [–í—ã–≤–æ–¥–∏–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω](#–≤—ã–≤–æ–¥–∏–º-—Å–ø–∏—Å–æ–∫-–¥–æ—Å—Ç—É–ø–Ω—ã—Ö-–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö-–º–∞—à–∏–Ω)
- [–†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏](#—Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–µ–º-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏-–º–∞—à–∏–Ω–∞–º–∏)
- [–ü—É–±–ª–∏–∫–∞—Ü–∏—è](#–ø—É–±–ª–∏–∫–∞—Ü–∏—è)
- [–ò—Ç–æ–≥–∏](#–∏—Ç–æ–≥–∏)

VS Code –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∫—É–¥–∞ —Å –ø–æ–º–æ—â—å—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∫—É—á–∞ –≤—Å–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤. –ú–Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±–æ–ª—å–Ω–æ, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–∫–∏–¥–∞—Ç—å –µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ —è —Å—Ä–∞–∑—É –Ω–∞—á–∏–Ω–∞—é –ø—É—Ç–∞—Ç—å—Å—è –≤ –æ–∫–Ω–∞—Ö –∏ –∑–∞–±—ã–≤–∞—é, —á—Ç–æ —è –≤–æ–æ–±—â–µ —Ö–æ—Ç–µ–ª —Å–¥–µ–ª–∞—Ç—å. –Ø –¥—É–º–∞—é, –∫–∞–∂–¥—ã–π —Ö–æ—Ç—å —Ä–∞–∑ —Ç–µ—Ä—è–ª—Å—è ~~–≤ —Ç—Ä–µ—Ö —Å–æ—Å–Ω–∞—Ö~~ –≤–æ –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏–º –æ–∫–Ω–∞—Ö, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ø–æ–ª–æ–∂—É, —á—Ç–æ –≤–∞–º —ç—Ç–æ –∑–Ω–∞–∫–æ–º–æ. –£ –º–µ–Ω—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω, –∏ –º–µ–Ω—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, —á—Ç–æ –¥–ª—è –∏—Ö –∑–∞–ø—É—Å–∫–∞ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å VirtualBox –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É **Run**. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≥–æ–≤–æ—Ä—è, —Å–µ–≥–æ–¥–Ω—è —è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –∏–∑–±–∞–≤–∏–ª—Å—è –æ—Ç —Å–≤–æ–µ–π –±–æ–ª–∏.

–≠—Ç–æ —Å—Ç–∞—Ç—å—è –ø—Ä–æ–≤–µ–¥–µ—Ç –≤–∞—Å —á–µ—Ä–µ–∑ –≤–µ—Å—å –ø—É—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è VirtualBox extension - –æ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∞–∑–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞, –¥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª–∫–∞–º–∏ –∏–∑ VS Code.

## Research

–ü—Ä–µ–∂–¥–µ —á–µ–º –±–µ–∂–∞—Ç—å —Å–ª–æ–º—è –≥–æ–ª–æ–≤—É –∏ –Ω–∞—á–∏–Ω–∞—Ç—å —á—Ç–æ-—Ç–æ –ø–∏—Å–∞—Ç—å, –Ω—É–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ —É–∂–µ –µ—Å—Ç—å —á—Ç–æ-—Ç–æ –≥–æ—Ç–æ–≤–æ–µ. –ü–æ—ç—Ç–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—Å—è –≤ [VSCode Marketplace](https://marketplace.visualstudio.com/vscode) –∏ —É–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ, –∫ —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–∏—á–µ–≥–æ –≥–æ—Ç–æ–≤–æ–≥–æ –Ω–µ—Ç, –∏ –≤—Å—ë –ø—Ä–∏–¥–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —Å–∞–º–∏–º. –ù–æ –µ—â—ë –Ω–µ –≤—Å–µ –ø–æ—Ç–µ—Ä—è–Ω–æ, –∏ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—Å—è –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ä—ã [github](https://github.com/), —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ –∏ –Ω–∞—Ö–æ–¥–∏–º npm –ø–∞–∫–µ—Ç [node-virtualbox](https://github.com/Node-Virtualization/node-virtualbox), –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª–∫–∞–º–∏.

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ —Ç–µ–º–ø–ª–µ–π—Ç–∞

–ï—Å–ª–∏ –≤—ã —á–∏—Ç–∞–µ—Ç–µ —ç—Ç—É —Å—Ç–∞—Ç—å—é, —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã [Node.js](https://nodejs.org/en/) –∏ [Git](https://git-scm.com/), –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Yeoman](http://yeoman.io/) –∏ [VS Code Extension Generator](https://www.npmjs.com/package/generator-code).

```bash
npm install -g yo generator-code
```

–ü–æ—Å–ª–µ —á–µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —Å–∞–º —Ç–µ–º–ø–ª–µ–π—Ç. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–º–∞–Ω–¥—É –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª–µ–π

```bash
you code

# ? What type of extension do you want to create? New Extension (TypeScript)
# ? What's the name of your extension? virtualbox-vscode-extension
### Press <Enter> to choose default for all options below ###

# ? What's the identifier of your extension? virtualbox-vscode-extension
# ? What's the description of your extension? LEAVE BLANK
# ? Initialize a git repository? Yes
# ? Which package manager to use? yarn

code ./virtualbox-vscode-extension
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å [–≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://code.visualstudio.com/api/get-started/extension-anatomy).

## –ù–µ–º–Ω–æ–≥–æ –æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

–ï—Å–ª–∏ –≤—ã —É–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å VSCode –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏, —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –º–æ–≥–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤—Å–µ –æ–Ω–∏ –≤—ã–≥–ª—è–¥—è—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ VSCode –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ Electron, —ç—Ç–æ –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –µ–≥–æ API –∏ –≤–µ—Ä—Å—Ç–∞—Ç—å –≤—Å–µ —á—Ç–æ –≤–∞–º –∑–∞—Ö–æ—á–µ—Ç—Å—è. –ù—É –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –µ—Å—Ç—å [–æ–¥–Ω–æ –º–µ—Å—Ç–æ, –≥–¥–µ –≤–∞–º –≤—Å—ë –¥–æ–∑–≤–æ–ª–µ–Ω–æ... –Ω—É –ø–æ—á—Ç–∏ –≤—Å—ë ...](https://code.visualstudio.com/api/extension-guides/webview) –í –æ—Å—Ç–∞–ª—å–Ω–æ–º –∂–µ, –≤–µ—Å—å —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞–∑–±–∏—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å —Å –ø–æ–º–æ—â—å—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –æ–¥–Ω–∏–º –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —è–≤–ª—è–µ—Ç—Å—è [TreeView](https://code.visualstudio.com/api/extension-guides/tree-view), –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã–π –ø–∞–∫–µ—Ç–æ–º [virtualbox](https://github.com/Node-Virtualization/node-virtualbox) —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–æ–ª–±—ç–∫–∞—Ö, –∞ —Å–∞–º–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ JavaScript, –ø–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –Ω–µ–∫–æ—Ç–æ—Ä—É—é –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É.

1. –î–æ–±–∞–≤–∏–º –ø–∞–ø–∫—É `typings` –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å–æ–∑–¥–∞–¥–∏–º –≤ –Ω–µ–π —Ñ–∞–π–ª `virtualbox.d.ts` —Å–æ –≤—Å–µ–º–∏ —Ç–∞–π–ø–∏–Ω–≥–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –¥–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ JS –∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–æ—Ç–æ–≤—ã—Ö —Ç–∞–π–ø–∏–Ω–≥–æ–≤.

```ts
declare module 'virtualbox' {
	export interface VMList {
		[id: string]: { name: string; running: boolean };
	}

	export interface VBoxError {
		message: string;
	}

	export function list(callback: (list: VMList, error?: VBoxError) => void): void;
	export function start(
		vmId: string,
		use_gui: boolean,
		callback: (error?: VBoxError) => void
	): void;
	export function isRunning(
		vmId: string,
		callback: (error: VBoxError, result: boolean) => void
	): void;
	export function savestate(vmId: string, callback: (error?: VBoxError) => void): void;
	export function poweroff(vmId: string, callback: (error?: VBoxError) => void): void;
}
```

2. –ü—Ä–æ–≤–µ–¥–µ–º [–ø—Ä–æ–º–∏—Å–∏—Ñ–∏–∫–∞—Ü–∏—é](https://learn.javascript.ru/promisify), –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö –Ω–∞—Å –º–µ—Ç–æ–¥–æ–≤.

```ts
import * as virtualbox from 'virtualbox';
import { promisify } from 'util';

export interface VirtualMachine {
	id: string;
	name: string;
	running: boolean;
	os: string;
}

export const isRunning = promisify(virtualbox.isRunning);
export const saveState = promisify(virtualbox.savestate);
export const powerOff = promisify(virtualbox.poweroff);

export function startWithGui(vmId: string): Promise<void> {
	return new Promise((resolve, reject) => {
		virtualbox.start(vmId, true, (error) => {
			if (error) {
				reject(error);
			} else {
				resolve();
			}
		});
	});
}

export function getAllVms(): Promise<VirtualMachine[]> {
	return new Promise((resolve, reject) => {
		virtualbox.list(async (list, error) => {
			if (error) {
				reject(error);
			} else {
				const vmsPromise = Object.keys(list).map(
					async (vmId) =>
						({
							id: vmId,
							name: list[vmId].name,
							running: list[vmId].running
						}) as VirtualMachine
				);

				const vms = await Promise.all(vmsPromise);
				resolve(vms);
			}
		});
	});
}
```

## Contribution points

–ö–∞–∫ —è —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª —Ä–∞–Ω–µ–µ, VS Code —Ä–∞–∑–±–∏—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä—è—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é JSON –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π, –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö [Contribution Points](https://code.visualstudio.com/api/references/contribution-points). –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –¥–≤–∞ –≤–∏–¥–∞ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π: [viewsContainers](https://code.visualstudio.com/api/references/contribution-points#contributes.viewsContainers) –∏ [views](https://code.visualstudio.com/api/references/contribution-points#contributes.views). –¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫—Ä—ã—Ç—å `package.json` –≤ –ø–∞–ø–∫–µ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –∏ –Ω–∞–π–¥–µ–º –ø–æ–ª–µ `contribution`, –∏ –∑–∞–º–µ–Ω–∏–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–µ:

```json
"contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "virtual-box-explorer",
          "title": "Virtual Machines",
          "icon": "resources/virtualbox.svg"
        }
      ]
    },
    "views": {
      "virtual-box-explorer": [
        {
          "id": "vb-machines",
          "name": "Virtual Machines"
        }
      ]
    }
}
```

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è, —á—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –ú—ã –æ–±—ä—è–≤–ª—è–µ–º _viewContainer_ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º _virtual-box-explorer_ –∏ —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –æ–Ω –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ _activitybar_, —ç—Ç–æ —Ö–æ—Ä–æ—à–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –Ω–∞–º –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è —Ç–∞–∫–∏–µ _viewsContainers_ –∫–∞–∫ _Explorer_, _Search_, _Git_, _Debugger_ –∏ —Ç.–¥. –î–∞–ª–µ–µ –º—ã –æ–±—ä—è–≤–ª—è–µ–º _view_ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º _vb-machines_ –∏ —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –æ–Ω–æ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ _viewContainer_ —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º _virtual-box-explorer_.

–í—ã –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–∞–º–µ—Ç–∏–ª–∏, —á—Ç–æ —è –æ–±—ä—è–≤–∏–ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∏–∫–æ–Ω–∫–æ–π `resources/virtualbox.svg`. –†–∞–∑–º–µ—Ä –∏ —Ü–≤–µ—Ç –∏–∫–æ–Ω–æ–∫ VS Code —Ç–∞–∫–∂–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, –ø–æ—ç—Ç–æ–º—É —è –∑–∞—Ä–∞–Ω–µ–µ –µ—ë –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª, –∞ –≤—ã –ø—Ä–æ—Å—Ç–æ —Å–∫–∞—á–∞–π—Ç–µ –µ—ë –∏–∑ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è](https://github.com/acherkashin/virtualbox-vscode-extension/blob/master/resources/virtualbox.svg).

–¢–∞–∫–∂–µ —Å—Ç–æ–∏—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –µ—â—ë –æ–¥–Ω–æ–º –æ—á–µ–Ω—å –≤–∞–∂–Ω–æ–º –∞—Å–ø–µ–∫—Ç–µ. –í–∞—à–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É—é—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤ –ø–æ–ª–µ `actionvationEvents` –≤ `package.json`, —ç—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —á—Ç–æ–±—ã –≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ –Ω–µ –ø—Ä–æ—Å–∞–∂–∏–≤–∞–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ù–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —á—Ç–æ–±—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ _view_, –¥–ª—è —ç—Ç–æ–≥–æ –∑–∞–º–µ–Ω–∏–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–µ:

```json
"activationEvents": [
    "onView:vb-machines"
]
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–µ–º –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Å–∞–º–æ–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π —á–∞—Å—Ç–∏ ...

## –í—ã–≤–æ–¥–∏–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –≤—Å—ë –≥–æ—Ç–æ–≤–æ, –ø—Ä–∏—Å—Ç—É–ø–∏–º –∫ –≤—ã–≤–æ–¥—É —Å–ø–∏—Å–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω (—É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω VirtualBox). –ï—Å–ª–∏ –≤—ã –µ—â—ë –Ω–µ –∑–∞–±—ã–ª–∏, —Ç–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ—Ä–µ–≤–æ (`TreeView`), –≥–¥–µ –∫–∞–∂–¥–∞—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –±—É–¥–µ—Ç –∫–æ—Ä–Ω–µ–≤—ã–º —É–∑–ª–æ–º. –î–ª—è —ç—Ç–æ–≥–æ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `TreeDataProvider`, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ `TreeView` –±—É–¥–µ—Ç –ø–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å. –ù—É —á—Ç–æ –∂, —Å–æ–∑–¥–∞–¥–∏–º –¥–≤–∞ —Ñ–∞–π–ª–∞ –≤ –ø–∞–ø–∫–µ `src`:

- `vmsProvider.ts` - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é `TreeDataProvider`;
- `vmTreeitem.ts` - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —É–∑–ª–∞ –¥–µ—Ä–µ–≤–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É.

```ts
// vmTreeitem.ts

import * as vscode from 'vscode';
import { VirtualMachine } from './utils';

export class VirtualMachineTreeItem extends vscode.TreeItem {
	constructor(public readonly vm: VirtualMachine) {
		super(vm.name);

		this.id = vm.id;
		// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è –∑–∞–ø—É—â–µ–Ω–Ω–æ–π –∏ –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω
		// https://microsoft.github.io/vscode-codicons/dist/codicon.html - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ codicon
		// https://code.visualstudio.com/updates/v1_42#_codicons-for-reuse - –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å codicon –≤ —Å–≤–æ–∏—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è—Ö
		this.iconPath = vm.running ? new vscode.ThemeIcon('vm-running') : new vscode.ThemeIcon('vm');
		// –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è contextValue –º—ã –º–æ–∂–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ç–µ –∏–ª–∏ –∏–Ω—ã–µ —ç–∫—à–µ–Ω—ã –¥–ª—è —É–∑–ª–∞ –¥–µ—Ä–µ–≤–∞.
		// –° —ç—Ç–∏–º –º—ã —Ä–∞–∑–±–µ—Ä–µ–º—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ
		this.contextValue = vm.running ? 'vmRunning' : 'vmStopped';
	}
}

// vmsProvider.ts

import * as vscode from 'vscode';
import { getAllVms } from './utils';
import { VirtualMachineTreeItem } from './vmTreeitem';

export class VirtualMachinesProvider implements vscode.TreeDataProvider<vscode.TreeItem> {
	private _onDidChangeTreeData: vscode.EventEmitter<VirtualMachineTreeItem | undefined> =
		new vscode.EventEmitter<VirtualMachineTreeItem | undefined>();
	readonly onDidChangeTreeData: vscode.Event<VirtualMachineTreeItem | undefined> =
		this._onDidChangeTreeData.event;

	// –ú–µ—Ç–æ–¥ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ TreeDataProvider.
	// –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º—ã –º–æ–∂–µ–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ä–µ–≤–æ –∏–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —É–∑–µ–ª,
	// –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–≥–¥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –∏–∑–º–µ–Ω–∏–ª–æ—Å—å (–≤—ã–∫–ª—é—á–∏–ª–∞—Å—å/–≤–∫–ª—é—á–∏–ª–∞—Å—å)
	refresh(item?: VirtualMachineTreeItem): void {
		this._onDidChangeTreeData.fire(item);
	}

	getTreeItem(element: vscode.TreeItem): vscode.TreeItem | Thenable<vscode.TreeItem> {
		return element;
	}

	getChildren(element?: vscode.TreeItem): vscode.ProviderResult<vscode.TreeItem[]> {
		return getAllVms()
			.then((vms) => vms.map((vm) => new VirtualMachineTreeItem(vm)))
			.catch((err) => {
				// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—à–∏–±–∫–æ–π, –µ—Å–ª–∏ –≤–¥—Ä—É–≥ –≤—Å—ë –ø–æ—à–ª–æ –Ω–µ –ø–æ –ø–ª–∞–Ω—É
				vscode.window.showErrorMessage(err);
				return [];
			});
	}
}
```

–ò —Ç–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–π `VirtualMachinesProvider`. –î–ª—è —ç—Ç–æ–≥–æ –≤ —Ñ–∞–π–ª–µ `extension.ts` –∑–∞–º–µ–Ω–∏–º –º–µ—Ç–æ–¥ `activate` –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π:

```ts
export function activate(context: vscode.ExtensionContext) {
	const vmProvider = new VirtualMachinesProvider();
	// –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º TreeView –≤–Ω—É—Ç—Ä–∏ "vb-machines"
	vscode.window.registerTreeDataProvider('vb-machines', vmProvider);
}
```

–î–∞–≤–∞–π—Ç–µ –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ –∑–∞–ø—É—Å—Ç–∏–º –Ω–∞—à extension:

<TitledImage src="/virtualbox-vscode-extension/vms-list.png" alt="–°–ø–∏—Å–æ–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω"/>

–û—Ç–ª–∏—á–Ω–æ! –ò–¥—ë–º –¥–∞–ª—å—à–µ! üéâüéâüéâ

## –†–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏

–ú—ã —Å–¥–µ–ª–∞–ª–∏ –ø–µ—Ä–≤—ã–π —à–∞–≥, –Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤—Å—ë –µ—â—ë —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–µ, –ø–æ—ç—Ç–æ–º—É –¥–∞–≤–∞–π—Ç–µ –∑–∞—Å—Ç–∞–≤–∏–º –µ–≥–æ –ø—Ä–∏–Ω–æ—Å–∏—Ç—å —Ö–æ—Ç—å –∫–∞–∫—É—é-—Ç–æ –ø–æ–ª—å–∑—É. –ó–∞–ø—É—Å–∫ –ª—é–±—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ VS Code –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é [–∫–æ–º–∞–Ω–¥](https://code.visualstudio.com/api/extension-guides/command). –ö–æ–º–∞–Ω–¥—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —É–∂–µ —Ö–æ—Ä–æ—à–æ –Ω–∞–º –∑–Ω–∞–∫–æ–º—ã—Ö [Contribution Points](https://code.visualstudio.com/api/references/contribution-points). –î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –¥–≤–µ –∫–æ–º–∞–Ω–¥—ã –≤ —É–∑–ª—ã –¥–µ—Ä–µ–≤–∞ —Å –Ω–∞—à–∏–º–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏:

- –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã - `virtualbox-extension.runVM`
- –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã - `virtualbox-extension.saveStateVM`

–¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è `commands` –∏ `menus` –≤ —Å–µ–∫—Ü–∏—é `contributes`:

```json
"contributes": {
    // ...
    "commands": [
      {
        "command": "virtualbox-extension.runVM",
        "category": "Virtual Box",
        "title": "Run Virtual Machine",
        "icon": "$(run)"
      },
      {
        "command": "virtualbox-extension.saveStateVM",
        "category": "Virtual Box",
        "title": "Stop Virtual Machine (state will be saved)",
        "icon": "$(debug-stop)"
      }
    ],
    "menus": {
      "view/item/context": [
        {
          "command": "virtualbox-extension.runVM",
          "group": "inline",
          "when": "viewItem == vmStopped && view == vb-machines"
        },
        {
          "command": "virtualbox-extension.saveStateVM",
          "group": "inline",
          "when": "viewItem == vmRunning && view == vb-machines"
        }
      ],
      "commandPalette": [
        {
          "command": "virtualbox-extension.runVM",
          "when": "false"
        },
        {
          "command": "virtualbox-extension.saveStateVM",
          "when": "false"
        }
      ]
    }
  }
```

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è, —á—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ–º–µ—â–∞—é—Ç—Å—è –≤ —Å–µ–∫—Ü–∏—é `commands`, –ø–æ—ç—Ç–æ–º—É –∏–º–µ–Ω–Ω–æ —Å—é–¥–∞ –º—ã –¥–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã –∏ —É–∫–∞–∑—ã–≤–∞–µ–º –¥–ª—è –Ω–∏—Ö `category`, `title` –∏ `icon`. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–º–µ—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –≤–∏–¥–µ –∫–Ω–æ–ø–∫–∏ –≤ –Ω–∞—à–µ –¥–µ—Ä–µ–≤–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é `menus`, —Å–æ–¥–µ—Ä–∂–∞—â–µ–π —Å–µ–∫—Ü–∏—é `view/item/context`. –ó–¥–µ—Å—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ–ª–µ [`when`](https://code.visualstudio.com/docs/getstarted/keybindings#_when-clause-contexts) —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤–Ω—É—Ç—Ä–∏ —É–∑–ª–∞ –¥–µ—Ä–µ–≤–∞. –ó–¥–µ—Å—å –Ω–∞–º –∏ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è `contextValue`, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –æ–±—ä—è–≤–∏–ª–∏ –≤ `VirtualMachineTreeItem`, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª–∫–∏ –∏ –∫–Ω–æ–ø–∫—É –≤—ã–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∑–∞–ø—É—â–µ–Ω–Ω–æ–π. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–±–æ –≤—Å—ë–º —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–ª—è TreeView](https://code.visualstudio.com/api/extension-guides/tree-view). –ù—É –∏ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –º—ã —Å–∫—Ä–æ–µ–º –Ω–∞—à–∏ –∫–æ–º–∞–Ω–¥—ã –∏–∑ _Command Palette_ (–ø–∞–Ω–µ–ª—å –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ `CTRL/CMD+P`) —Å –ø–æ–º–æ—â—å—é `menus.commandPalette`.

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥. –î–æ–±–∞–≤–∏–º —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ –º–µ—Ç–æ–¥ `activate` –≤ —Ñ–∞–π–ª–µ `extension.ts`:

```ts
context.subscriptions.push(
	vscode.commands.registerCommand(
		'virtualbox-extension.runVM',
		async (vmTreeItem?: VirtualMachineTreeItem) => {
			if (vmTreeItem) {
				const { vm } = vmTreeItem;
				const running = await isRunning(vm.id);

				if (!running) {
					try {
						await startWithGui(vm.id);
						vscode.window.showInformationMessage(
							`Virtual machine "${vm.name}" has been run successfully`
						);
					} catch (ex) {
						vscode.window.showErrorMessage(
							`Cannot run virtual machine "${vm.name}": ${(ex && ex.message) || 'Unknown error'}`
						);
					}
				}

				vmProvider.refresh();
			}
		}
	),
	vscode.commands.registerCommand(
		'virtualbox-extension.saveStateVM',
		async (vmTreeItem: VirtualMachineTreeItem) => {
			if (vmTreeItem) {
				const { vm } = vmTreeItem;

				const running = await isRunning(vm.id);
				if (running) {
					try {
						await saveState(vm.id);
						vscode.window.showInformationMessage(
							`Virtual machine "${vm.name}" has been stopped successfully`
						);
					} catch (ex) {
						vscode.window.showErrorMessage(
							`Cannot stop virtual machine "${vm.name}": ${(ex && ex.message) || 'Unknown error'}`
						);
					}
				}
				vmProvider.refresh();
			}
		}
	)
);
```

–ó–¥–µ—Å—å –Ω–∞–º –∏ –ø—Ä–∏–≥–æ–¥–∏–ª–∏—Å—å —É—Ç–∏–ª–∏—Ç–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –æ–±—ä—è–≤–ª–µ–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª–µ `utils.ts`.
–ö–æ–Ω–µ—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Ñ–∞–π–ª–∞ `extension.ts` –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏](https://github.com/acherkashin/virtualbox-vscode-extension/blob/master/src/extension.ts):

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –≤—Å—ë –≥–æ—Ç–æ–≤–æ, –¥–∞–≤–∞–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏–º –Ω–∞—à extension:

<TitledImage src="/virtualbox-vscode-extension/running-vm.gif" alt="–ó–∞–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã"/>
<TitledImage src="/virtualbox-vscode-extension/stopping-vm.gif" alt="–í—ã–∫–ª—é—á–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã"/>

## –ü—É–±–ª–∏–∫–∞—Ü–∏—è

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ, –º—ã –º–æ–∂–µ–º –µ–≥–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å. –ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://code.visualstudio.com/api/working-with-extensions/publishing-extension). –ê —è —Ä–∞—Å—Å–∫–∞–∂—É –æ–± —ç—Ç–æ–º –≤–∫—Ä–∞—Ç—Ü–µ.

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º [vsce](https://github.com/microsoft/vscode-vsce) (Visual Studio Code Extension Manager)

```bash
npm install -g vsce
```

[–ü–æ–ª—É—á–∞–µ–º Personal Access Token](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#get-a-personal-access-token). –ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å PAT —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è, –∏–Ω–∞—á–µ –æ–Ω –±—É–¥–µ—Ç —É—Ç–µ—Ä—è–Ω, —Ç–∞–∫ –∫–∞–∫ Microsoft –Ω–µ —Ö—Ä–∞–Ω–∏—Ç PAT.

–£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –≤ `package.json` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è (–ù–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤–∞—à–∏, –∞ –Ω–µ –º–æ–∏ üòú).

```json
"name": "virtualbox-extension",
"displayName": "VirtualBox",
"description": "Extension allows to manage your VMs right from Visual Studio Code",
"publisher": "acherkashin",
"icon": "images/virtualbox-extension-icon.png",
"repository": {
    "url": "https://github.com/acherkashin/virtualbox-vscode-extension"
},
```

–û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—Ä–∞—Ç–∏—Ç—å –Ω–∞ –ø–æ–ª–µ `publisher`, –æ–Ω–æ –Ω–∞–º –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

–°–æ–∑–¥–∞–µ–º `publisher` —Å —Ç–µ–º –∂–µ –∏–º–µ–Ω–µ–º, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑–∞–Ω–æ, –≤ `package.json`. –ö–∞–∫ —Ç–æ–ª—å–∫–æ, –≤—ã –ø–æ–ª—É—á–∏–ª–∏ [Personal Access Token](https://code.visualstudio.com/api/working-with-extensions/publishing-extension#get-a-personal-access-token), –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞—Ç—å `publisher` –∏—Å–ø–æ–ª—å–∑—É—è `vsce`:

```bash
vsce create-publisher (publisher name)
```

–ü—É–±–ª–∏–∫—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã:

```bash
vsce publish -p (access token)
```

–í—Å—ë –≥–æ—Ç–æ–≤–æ. –ù–∞ —ç—Ç–æ–º –Ω–∞—à –ø—É—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω!

## –ò—Ç–æ–≥–∏

–î–∞–≤–∞–π—Ç–µ –Ω–µ–Ω–∞–¥–æ–ª–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –∏ –ø–æ–¥–≤–µ–¥–µ–º –∏—Ç–æ–≥. –ú—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å:

- –ö–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VS Code extension;
- –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å VirtualBox, —Å –ø–æ–º–æ—â—å—é –ø–∞–∫–µ—Ç–∞ [node-virtualbox](https://github.com/Node-Virtualization/node-virtualbox);
- –ö–∞–∫ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –≤–∏–¥–µ –¥–µ—Ä–µ–≤–∞ —Å –ø–æ–º–æ—â—å—é `TreeDataProvider`;
- –ß—Ç–æ —Ç–∞–∫–æ–µ _–ö–æ–º–∞–Ω–¥—ã_ –∏ –∫–∞–∫ –∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è;
- –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏—è extension –≤ Marketplace.

–¢–∞–∫–∂–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—á–∏—Ç–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é [VS Code Extension API](https://code.visualstudio.com/api). –ò [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π](https://github.com/microsoft/vscode-extension-samples), –≥–¥–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞–≥–ª—è–¥–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.
